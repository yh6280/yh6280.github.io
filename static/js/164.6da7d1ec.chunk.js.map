{"version":3,"file":"static/js/164.6da7d1ec.chunk.js","mappings":"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","sources":["utils/user.ts","components/id-select.tsx","components/user-select.tsx","screens/project-list/search-panel.tsx","components/pin.tsx","utils/reorder.ts","utils/use-optimistic-options.ts","utils/project.ts","utils/url.ts","screens/project-list/util.ts","screens/project-list/list.tsx","screens/project-list/index.tsx","utils/task.ts","screens/kanban/util.ts","utils/task-type.ts","assets/task.svg","assets/bug.svg","screens/kanban/create-task.tsx","components/mark.tsx","utils/kanban.ts","components/drag-and-drop.tsx","screens/kanban/kanban-column.tsx","components/task-type-select.tsx","screens/kanban/search-panel.tsx","screens/kanban/create-kanban.tsx","utils/epic.ts","components/epic-select.tsx","screens/kanban/task-modal.tsx","screens/kanban/index.tsx","screens/epic/util.ts","screens/epic/create-epic.tsx","screens/epic/index.tsx","screens/project/index.tsx","screens/project-list/project-modal.tsx","authenticated-app.tsx"],"sourcesContent":["import { useHttp } from \"utils/http\";\nimport { User } from \"types/user\";\nimport { useQuery } from \"react-query\";\n\nexport const useUsers = (param?: Partial<User>) => {\n  const client = useHttp();\n\n  return useQuery<User[]>([\"users\", param], () =>\n    client(\"users\", { data: param })\n  );\n};\n","import React from \"react\";\nimport { Raw } from \"types\";\nimport { Select } from \"antd\";\n\ntype SelectProps = React.ComponentProps<typeof Select>;\n\ninterface IdSelectProps\n  extends Omit<SelectProps, \"value\" | \"onChange\" | \"options\"> {\n  value?: Raw | null | undefined;\n  onChange?: (value?: number) => void;\n  defaultOptionName?: string;\n  options?: { name: string; id: number }[];\n}\n\n/**\n * value 可以传入多种类型的值\n * onChange只会回调 number|undefined 类型\n * 当 isNaN(Number(value)) 为true的时候，代表选择默认类型\n * 当选择默认类型的时候，onChange会回调undefined\n * @param props\n * @constructor\n */\nexport const IdSelect = (props: IdSelectProps) => {\n  const { value, onChange, defaultOptionName, options, ...restProps } = props;\n  return (\n    <Select\n      value={options?.length ? toNumber(value) : 0}\n      onChange={(value) => onChange?.(toNumber(value) || undefined)}\n      {...restProps}\n    >\n      {defaultOptionName ? (\n        <Select.Option value={0}>{defaultOptionName}</Select.Option>\n      ) : null}\n      {options?.map((option) => (\n        <Select.Option key={option.id} value={option.id}>\n          {option.name}\n        </Select.Option>\n      ))}\n    </Select>\n  );\n};\n\nconst toNumber = (value: unknown) => (isNaN(Number(value)) ? 0 : Number(value));\n","import React from \"react\";\nimport { useUsers } from \"utils/user\";\nimport { IdSelect } from \"components/id-select\";\n\nexport const UserSelect = (props: React.ComponentProps<typeof IdSelect>) => {\n  const { data: users } = useUsers();\n  return <IdSelect options={users || []} {...props} />;\n};\n","import React from \"react\";\nimport { Form, Input } from \"antd\";\nimport { UserSelect } from \"components/user-select\";\nimport { Project } from \"types/project\";\nimport { User } from \"types/user\";\n\ninterface SearchPanelProps {\n  users: User[];\n  param: Partial<Pick<Project, \"name\" | \"personId\">>;\n  setParam: (param: SearchPanelProps[\"param\"]) => void;\n}\n\nexport const SearchPanel = ({ users, param, setParam }: SearchPanelProps) => {\n  return (\n    <Form style={{ marginBottom: \"2rem\" }} layout={\"inline\"}>\n      <Form.Item>\n        {/*setParam(Object.assign({}, param, {name:evt.target.value}))*/}\n        <Input\n          placeholder={\"项目名\"}\n          type=\"text\"\n          value={param.name}\n          onChange={(evt) =>\n            setParam({\n              ...param,\n              name: evt.target.value,\n            })\n          }\n        />\n      </Form.Item>\n      <Form.Item>\n        <UserSelect\n          defaultOptionName={\"负责人\"}\n          value={param.personId}\n          onChange={(value) =>\n            setParam({\n              ...param,\n              personId: value,\n            })\n          }\n        />\n      </Form.Item>\n    </Form>\n  );\n};\n","import React from \"react\";\nimport { Rate } from \"antd\";\n\ninterface PinProps extends React.ComponentProps<typeof Rate> {\n  checked: boolean;\n  onCheckedChange?: (checked: boolean) => void;\n}\n\nexport const Pin = ({ checked, onCheckedChange, ...restProps }: PinProps) => {\n  return (\n    <Rate\n      count={1}\n      value={checked ? 1 : 0}\n      onChange={(num) => onCheckedChange?.(!!num)}\n      {...restProps}\n    />\n  );\n};\n","/**\n * 在本地对排序进行乐观更新\n * @param fromId 要排序的项目的id\n * @param type 'before' | 'after'\n * @param referenceId 参照id\n * @param list 要排序的列表, 比如tasks, kanbans\n */\nexport const reorder = ({\n  fromId,\n  type,\n  referenceId,\n  list,\n}: {\n  list: { id: number }[];\n  fromId: number;\n  type: \"after\" | \"before\";\n  referenceId: number;\n}) => {\n  const copiedList = [...list];\n  // 找到fromId对应项目的下标\n  const movingItemIndex = copiedList.findIndex((item) => item.id === fromId);\n  if (!referenceId) {\n    return insertAfter([...copiedList], movingItemIndex, copiedList.length - 1);\n  }\n  const targetIndex = copiedList.findIndex((item) => item.id === referenceId);\n  const insert = type === \"after\" ? insertAfter : insertBefore;\n  return insert([...copiedList], movingItemIndex, targetIndex);\n};\n\n/**\n * 在list中，把from放在to的前边\n * @param list\n * @param from\n * @param to\n */\nconst insertBefore = (list: unknown[], from: number, to: number) => {\n  const toItem = list[to];\n  const removedItem = list.splice(from, 1)[0];\n  const toIndex = list.indexOf(toItem);\n  list.splice(toIndex, 0, removedItem);\n  return list;\n};\n\n/**\n * 在list中，把from放在to的后面\n * @param list\n * @param from\n * @param to\n */\nconst insertAfter = (list: unknown[], from: number, to: number) => {\n  const toItem = list[to];\n  const removedItem = list.splice(from, 1)[0];\n  const toIndex = list.indexOf(toItem);\n  list.splice(toIndex + 1, 0, removedItem);\n  return list;\n};\n","import { QueryKey, useQueryClient } from \"react-query\";\nimport { reorder } from \"utils/reorder\";\nimport { Task } from \"types/task\";\n\nexport const useConfig = (\n  queryKey: QueryKey,\n  callback: (target: any, old?: any[]) => any[]\n) => {\n  const queryClient = useQueryClient();\n  return {\n    onSuccess: () => queryClient.invalidateQueries(queryKey),\n    async onMutate(target: any) {\n      const previousItems = queryClient.getQueryData(queryKey);\n      queryClient.setQueryData(queryKey, (old?: any[]) => {\n        return callback(target, old);\n      });\n      return { previousItems };\n    },\n    onError(error: any, newItem: any, context: any) {\n      queryClient.setQueryData(queryKey, context.previousItems);\n    },\n  };\n};\n\nexport const useDeleteConfig = (queryKey: QueryKey) =>\n  useConfig(\n    queryKey,\n    (target, old) => old?.filter((item) => item.id !== target.id) || []\n  );\nexport const useEditConfig = (queryKey: QueryKey) =>\n  useConfig(\n    queryKey,\n    (target, old) =>\n      old?.map((item) =>\n        item.id === target.id ? { ...item, ...target } : item\n      ) || []\n  );\nexport const useAddConfig = (queryKey: QueryKey) =>\n  useConfig(queryKey, (target, old) => (old ? [...old, target] : []));\n\nexport const useReorderKanbanConfig = (queryKey: QueryKey) =>\n  useConfig(queryKey, (target, old) => reorder({ list: old, ...target }));\n\nexport const useReorderTaskConfig = (queryKey: QueryKey) =>\n  useConfig(queryKey, (target, old) => {\n    const orderedList = reorder({ list: old, ...target }) as Task[];\n    return orderedList.map((item) =>\n      item.id === target.fromId\n        ? { ...item, kanbanId: target.toKanbanId }\n        : item\n    );\n  });\n","import { useHttp } from \"utils/http\";\nimport { QueryKey, useMutation, useQuery } from \"react-query\";\nimport {\n  useAddConfig,\n  useDeleteConfig,\n  useEditConfig,\n} from \"utils/use-optimistic-options\";\nimport { Project } from \"types/project\";\nimport { cleanObject } from \"utils/index\";\n\nexport const useProjects = (param?: Partial<Project>) => {\n  const client = useHttp();\n\n  return useQuery<Project[]>([\"projects\", cleanObject(param)], () =>\n    client(\"projects\", { data: param })\n  );\n};\n\nexport const useEditProject = (queryKey: QueryKey) => {\n  const client = useHttp();\n  return useMutation(\n    (params: Partial<Project>) =>\n      client(`projects/${params.id}`, {\n        method: \"PATCH\",\n        data: params,\n      }),\n    useEditConfig(queryKey)\n  );\n};\n\nexport const useAddProject = (queryKey: QueryKey) => {\n  const client = useHttp();\n\n  return useMutation(\n    (params: Partial<Project>) =>\n      client(`projects`, {\n        data: params,\n        method: \"POST\",\n      }),\n    useAddConfig(queryKey)\n  );\n};\n\nexport const useDeleteProject = (queryKey: QueryKey) => {\n  const client = useHttp();\n\n  return useMutation(\n    ({ id }: { id: number }) =>\n      client(`projects/${id}`, {\n        method: \"DELETE\",\n      }),\n    useDeleteConfig(queryKey)\n  );\n};\n\nexport const useProject = (id?: number) => {\n  const client = useHttp();\n  return useQuery<Project>(\n    [\"project\", { id }],\n    () => client(`projects/${id}`),\n    {\n      enabled: Boolean(id),\n    }\n  );\n};\n","import { URLSearchParamsInit, useSearchParams } from \"react-router-dom\";\nimport { useMemo, useState } from \"react\";\nimport { cleanObject, subset } from \"utils/index\";\n\n/**\n * 返回页面url中，指定键的参数值\n */\nexport const useUrlQueryParam = <K extends string>(keys: K[]) => {\n  const [searchParams] = useSearchParams();\n  const setSearchParams = useSetUrlSearchParam();\n  const [stateKeys] = useState(keys);\n  return [\n    useMemo(\n      () =>\n        subset(Object.fromEntries(searchParams), stateKeys) as {\n          [key in K]: string;\n        },\n      [searchParams, stateKeys]\n    ),\n    (params: Partial<{ [key in K]: unknown }>) => {\n      return setSearchParams(params);\n      // iterator\n      // iterator: https://codesandbox.io/s/upbeat-wood-bum3j?file=/src/index.js\n    },\n  ] as const;\n};\n\nexport const useSetUrlSearchParam = () => {\n  const [searchParams, setSearchParam] = useSearchParams();\n  return (params: { [key in string]: unknown }) => {\n    const o = cleanObject({\n      ...Object.fromEntries(searchParams),\n      ...params,\n    }) as URLSearchParamsInit;\n    return setSearchParam(o);\n  };\n};\n","import { useSetUrlSearchParam, useUrlQueryParam } from \"utils/url\";\nimport { useMemo } from \"react\";\nimport { useProject } from \"utils/project\";\n\n// 项目列表搜索的参数\nexport const useProjectsSearchParams = () => {\n  const [param, setParam] = useUrlQueryParam([\"name\", \"personId\"]);\n  return [\n    useMemo(\n      () => ({ ...param, personId: Number(param.personId) || undefined }),\n      [param]\n    ),\n    setParam,\n  ] as const;\n};\n\nexport const useProjectsQueryKey = () => {\n  const [params] = useProjectsSearchParams();\n  return [\"projects\", params];\n};\n\nexport const useProjectModal = () => {\n  const [{ projectCreate }, setProjectCreate] = useUrlQueryParam([\n    \"projectCreate\",\n  ]);\n  const [{ editingProjectId }, setEditingProjectId] = useUrlQueryParam([\n    \"editingProjectId\",\n  ]);\n  const setUrlParams = useSetUrlSearchParam();\n  const { data: editingProject, isLoading } = useProject(\n    Number(editingProjectId)\n  );\n\n  const open = () => setProjectCreate({ projectCreate: true });\n  const close = () => setUrlParams({ projectCreate: \"\", editingProjectId: \"\" });\n  const startEdit = (id: number) =>\n    setEditingProjectId({ editingProjectId: id });\n\n  return {\n    projectModalOpen: projectCreate === \"true\" || Boolean(editingProjectId),\n    open,\n    close,\n    startEdit,\n    editingProject,\n    isLoading,\n  };\n};\n","import React from \"react\";\nimport { Dropdown, Menu, Modal, Table } from \"antd\";\nimport dayjs from \"dayjs\";\nimport { TableProps } from \"antd/es/table\";\nimport { Link } from \"react-router-dom\";\nimport { Pin } from \"components/pin\";\nimport { useDeleteProject, useEditProject } from \"utils/project\";\nimport { ButtonNoPadding } from \"components/lib\";\nimport {\n  useProjectModal,\n  useProjectsQueryKey,\n} from \"screens/project-list/util\";\nimport { Project } from \"types/project\";\nimport { User } from \"types/user\";\n\ninterface ListProps extends TableProps<Project> {\n  users: User[];\n}\n\nexport const List = ({ users, ...props }: ListProps) => {\n  const { mutate } = useEditProject(useProjectsQueryKey());\n  const pinProject = (id: number) => (pin: boolean) => mutate({ id, pin });\n  return (\n    <Table\n      rowKey={\"id\"}\n      pagination={false}\n      columns={[\n        {\n          title: <Pin checked={true} disabled={true} />,\n          render(value, project) {\n            return (\n              <Pin\n                checked={project.pin}\n                onCheckedChange={pinProject(project.id)}\n              />\n            );\n          },\n        },\n        {\n          title: \"名称\",\n          sorter: (a, b) => a.name.localeCompare(b.name),\n          render(value, project) {\n            return (\n              <Link to={`projects/${String(project.id)}`}>{project.name}</Link>\n            );\n          },\n        },\n        {\n          title: \"部门\",\n          dataIndex: \"organization\",\n        },\n        {\n          title: \"负责人\",\n          render(value, project) {\n            return (\n              <span>\n                {users.find((user) => user.id === project.personId)?.name ||\n                  \"未知\"}\n              </span>\n            );\n          },\n        },\n        {\n          title: \"创建时间\",\n          render(value, project) {\n            return (\n              <span>\n                {project.created\n                  ? dayjs(project.created).format(\"YYYY-MM-DD\")\n                  : \"无\"}\n              </span>\n            );\n          },\n        },\n        {\n          render(value, project) {\n            return <More project={project} />;\n          },\n        },\n      ]}\n      {...props}\n    />\n  );\n};\n\nconst More = ({ project }: { project: Project }) => {\n  const { startEdit } = useProjectModal();\n  const editProject = (id: number) => () => startEdit(id);\n  const { mutate: deleteProject } = useDeleteProject(useProjectsQueryKey());\n  const confirmDeleteProject = (id: number) => {\n    Modal.confirm({\n      title: \"确定删除这个项目吗?\",\n      content: \"点击确定删除\",\n      okText: \"确定\",\n      onOk() {\n        deleteProject({ id });\n      },\n    });\n  };\n  return (\n    <Dropdown\n      overlay={\n        <Menu>\n          <Menu.Item onClick={editProject(project.id)} key={\"edit\"}>\n            编辑\n          </Menu.Item>\n          <Menu.Item\n            onClick={() => confirmDeleteProject(project.id)}\n            key={\"delete\"}\n          >\n            删除\n          </Menu.Item>\n        </Menu>\n      }\n    >\n      <ButtonNoPadding type={\"link\"}>...</ButtonNoPadding>\n    </Dropdown>\n  );\n};\n","import React from \"react\";\nimport { SearchPanel } from \"screens/project-list/search-panel\";\nimport { List } from \"screens/project-list/list\";\nimport { useDebounce, useDocumentTitle } from \"utils\";\nimport { useProjects } from \"utils/project\";\nimport { useUsers } from \"utils/user\";\nimport {\n  useProjectModal,\n  useProjectsSearchParams,\n} from \"screens/project-list/util\";\nimport {\n  ButtonNoPadding,\n  ErrorBox,\n  Row,\n  ScreenContainer,\n} from \"components/lib\";\nimport { Profiler } from \"components/profiler\";\n\n// 状态提升可以让组件共享状态，但是容易造成 prop drilling\n\n// 基本类型，可以放到依赖里；组件状态，可以放到依赖里；非组件状态的对象，绝不可以放到依赖里\n// https://codesandbox.io/s/keen-wave-tlz9s?file=/src/App.js\n\n// 使用 JS 的同学，大部分的错误都是在 runtime(运行时) 的时候发现的\n// 我们希望，在静态代码中，就能找到其中的一些错误 -> 强类型\nexport const ProjectListScreen = () => {\n  useDocumentTitle(\"项目列表\", false);\n\n  const { open } = useProjectModal();\n\n  const [param, setParam] = useProjectsSearchParams();\n  const { isLoading, error, data: list } = useProjects(useDebounce(param, 200));\n  const { data: users } = useUsers();\n\n  return (\n    <Profiler id={\"项目列表\"}>\n      <ScreenContainer>\n        <Row marginBottom={2} between={true}>\n          <h1>项目列表</h1>\n          <ButtonNoPadding onClick={open} type={\"link\"}>\n            创建项目\n          </ButtonNoPadding>\n        </Row>\n        <SearchPanel users={users || []} param={param} setParam={setParam} />\n        <ErrorBox error={error} />\n        <List loading={isLoading} users={users || []} dataSource={list || []} />\n      </ScreenContainer>\n    </Profiler>\n  );\n};\n\nProjectListScreen.whyDidYouRender = false;\n","import { useHttp } from \"utils/http\";\nimport { QueryKey, useMutation, useQuery } from \"react-query\";\nimport { Task } from \"types/task\";\nimport {\n  useAddConfig,\n  useDeleteConfig,\n  useEditConfig,\n  useReorderTaskConfig,\n} from \"utils/use-optimistic-options\";\nimport { Project } from \"types/project\";\nimport { SortProps } from \"utils/kanban\";\nimport { useDebounce } from \"utils/index\";\n\nexport const useTasks = (param?: Partial<Task>) => {\n  const client = useHttp();\n  const debouncedParam = { ...param, name: useDebounce(param?.name, 200) };\n\n  return useQuery<Task[]>([\"tasks\", debouncedParam], () =>\n    client(\"tasks\", { data: debouncedParam })\n  );\n};\n\nexport const useAddTask = (queryKey: QueryKey) => {\n  const client = useHttp();\n\n  return useMutation(\n    (params: Partial<Task>) =>\n      client(`tasks`, {\n        data: params,\n        method: \"POST\",\n      }),\n    useAddConfig(queryKey)\n  );\n};\n\nexport const useTask = (id?: number) => {\n  const client = useHttp();\n  return useQuery<Project>([\"task\", { id }], () => client(`tasks/${id}`), {\n    enabled: Boolean(id),\n  });\n};\n\nexport const useEditTask = (queryKey: QueryKey) => {\n  const client = useHttp();\n  return useMutation(\n    (params: Partial<Task>) =>\n      client(`tasks/${params.id}`, {\n        method: \"PATCH\",\n        data: params,\n      }),\n    useEditConfig(queryKey)\n  );\n};\n\nexport const useDeleteTask = (queryKey: QueryKey) => {\n  const client = useHttp();\n\n  return useMutation(\n    ({ id }: { id: number }) =>\n      client(`tasks/${id}`, {\n        method: \"DELETE\",\n      }),\n    useDeleteConfig(queryKey)\n  );\n};\n\nexport const useReorderTask = (queryKey: QueryKey) => {\n  const client = useHttp();\n  return useMutation((params: SortProps) => {\n    return client(\"tasks/reorder\", {\n      data: params,\n      method: \"POST\",\n    });\n  }, useReorderTaskConfig(queryKey));\n};\n","import { useLocation } from \"react-router\";\nimport { useProject } from \"utils/project\";\nimport { useUrlQueryParam } from \"utils/url\";\nimport { useCallback, useMemo } from \"react\";\nimport { useTask } from \"utils/task\";\n\nexport const useProjectIdInUrl = () => {\n  const { pathname } = useLocation();\n  const id = pathname.match(/projects\\/(\\d+)/)?.[1];\n  return Number(id);\n};\n\nexport const useProjectInUrl = () => useProject(useProjectIdInUrl());\n\nexport const useKanbanSearchParams = () => ({ projectId: useProjectIdInUrl() });\n\nexport const useKanbansQueryKey = () => [\"kanbans\", useKanbanSearchParams()];\n\nexport const useTasksSearchParams = () => {\n  const [param] = useUrlQueryParam([\"name\", \"typeId\", \"processorId\", \"tagId\"]);\n  const projectId = useProjectIdInUrl();\n  return useMemo(\n    () => ({\n      projectId,\n      typeId: Number(param.typeId) || undefined,\n      processorId: Number(param.processorId) || undefined,\n      tagId: Number(param.tagId) || undefined,\n      name: param.name,\n    }),\n    [projectId, param]\n  );\n};\n\nexport const useTasksQueryKey = () => [\"tasks\", useTasksSearchParams()];\n\nexport const useTasksModal = () => {\n  const [{ editingTaskId }, setEditingTaskId] = useUrlQueryParam([\n    \"editingTaskId\",\n  ]);\n  const { data: editingTask, isLoading } = useTask(Number(editingTaskId));\n  const startEdit = useCallback(\n    (id: number) => {\n      setEditingTaskId({ editingTaskId: id });\n    },\n    [setEditingTaskId]\n  );\n  const close = useCallback(() => {\n    setEditingTaskId({ editingTaskId: \"\" });\n  }, [setEditingTaskId]);\n  return {\n    editingTaskId,\n    editingTask,\n    startEdit,\n    close,\n    isLoading,\n  };\n};\n","import { useHttp } from \"utils/http\";\nimport { useQuery } from \"react-query\";\nimport { TaskType } from \"types/task-type\";\n\nexport const useTaskTypes = () => {\n  const client = useHttp();\n\n  return useQuery<TaskType[]>([\"taskTypes\"], () => client(\"taskTypes\"));\n};\n","var _desc, _defs, _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgTask(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"16px\",\n    height: \"16px\",\n    viewBox: \"0 0 16 16\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"xmlns:sketch\": \"http://www.bohemiancoding.com/sketch/ns\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"task\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _desc || (_desc = /*#__PURE__*/React.createElement(\"desc\", null, \"Created with Sketch.\")), _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null)), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Page-1\",\n    stroke: \"none\",\n    strokeWidth: 1,\n    fill: \"none\",\n    fillRule: \"evenodd\",\n    \"sketch:type\": \"MSPage\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"task\",\n    \"sketch:type\": \"MSArtboardGroup\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Task\",\n    \"sketch:type\": \"MSLayerGroup\",\n    transform: \"translate(1.000000, 1.000000)\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle-36\",\n    fill: \"#4BADE8\",\n    \"sketch:type\": \"MSShapeGroup\",\n    x: 0,\n    y: 0,\n    width: 14,\n    height: 14,\n    rx: 2\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Page-1\",\n    transform: \"translate(4.000000, 4.500000)\",\n    stroke: \"#FFFFFF\",\n    strokeWidth: 2,\n    strokeLinecap: \"round\",\n    \"sketch:type\": \"MSShapeGroup\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2,5 L6,0\",\n    id: \"Stroke-1\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2,5 L0,3\",\n    id: \"Stroke-3\"\n  })))))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgTask);\nexport default __webpack_public_path__ + \"static/media/task.8118694e4adbcfdde6913a3751c4eb04.svg\";\nexport { ForwardRef as ReactComponent };","var _desc, _defs, _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgBug(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"16px\",\n    height: \"16px\",\n    viewBox: \"0 0 16 16\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xlinkHref: \"http://www.w3.org/1999/xlink\",\n    \"xmlns:sketch\": \"http://www.bohemiancoding.com/sketch/ns\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"bug\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _desc || (_desc = /*#__PURE__*/React.createElement(\"desc\", null, \"Created with Sketch.\")), _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null)), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Page-1\",\n    stroke: \"none\",\n    strokeWidth: 1,\n    fill: \"none\",\n    fillRule: \"evenodd\",\n    \"sketch:type\": \"MSPage\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"bug\",\n    \"sketch:type\": \"MSArtboardGroup\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Bug\",\n    \"sketch:type\": \"MSLayerGroup\",\n    transform: \"translate(1.000000, 1.000000)\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle-36\",\n    fill: \"#E5493A\",\n    \"sketch:type\": \"MSShapeGroup\",\n    x: 0,\n    y: 0,\n    width: 14,\n    height: 14,\n    rx: 2\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10,7 C10,8.657 8.657,10 7,10 C5.343,10 4,8.657 4,7 C4,5.343 5.343,4 7,4 C8.657,4 10,5.343 10,7\",\n    id: \"Fill-2\",\n    fill: \"#FFFFFF\",\n    \"sketch:type\": \"MSShapeGroup\"\n  }))))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgBug);\nexport default __webpack_public_path__ + \"static/media/bug.bc7dca9d4a51f551ee6467830220343a.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useEffect, useState } from \"react\";\nimport { useAddTask } from \"utils/task\";\nimport { useProjectIdInUrl, useTasksQueryKey } from \"screens/kanban/util\";\nimport { Card, Input } from \"antd\";\n\nexport const CreateTask = ({ kanbanId }: { kanbanId: number }) => {\n  const [name, setName] = useState(\"\");\n  const { mutateAsync: addTask } = useAddTask(useTasksQueryKey());\n  const projectId = useProjectIdInUrl();\n  const [inputMode, setInputMode] = useState(false);\n\n  const submit = async () => {\n    await addTask({ projectId, name, kanbanId });\n    setInputMode(false);\n    setName(\"\");\n  };\n\n  const toggle = () => setInputMode((mode) => !mode);\n\n  useEffect(() => {\n    if (!inputMode) {\n      setName(\"\");\n    }\n  }, [inputMode]);\n\n  if (!inputMode) {\n    return <div onClick={toggle}>+创建事务</div>;\n  }\n\n  return (\n    <Card>\n      <Input\n        onBlur={toggle}\n        placeholder={\"需要做些什么\"}\n        autoFocus={true}\n        onPressEnter={submit}\n        value={name}\n        onChange={(evt) => setName(evt.target.value)}\n      />\n    </Card>\n  );\n};\n","import React from \"react\";\n\nexport const Mark = ({ name, keyword }: { name: string; keyword: string }) => {\n  if (!keyword) {\n    return <>{name}</>;\n  }\n  const arr = name.split(keyword);\n  return (\n    <>\n      {arr.map((str, index) => (\n        <span key={index}>\n          {str}\n          {index === arr.length - 1 ? null : (\n            <span style={{ color: \"#257AFD\" }}>{keyword}</span>\n          )}\n        </span>\n      ))}\n    </>\n  );\n};\n","import { useHttp } from \"utils/http\";\nimport { QueryKey, useMutation, useQuery } from \"react-query\";\nimport { Kanban } from \"types/kanban\";\nimport {\n  useAddConfig,\n  useDeleteConfig,\n  useReorderKanbanConfig,\n} from \"utils/use-optimistic-options\";\n\nexport const useKanbans = (param?: Partial<Kanban>) => {\n  const client = useHttp();\n\n  return useQuery<Kanban[]>([\"kanbans\", param], () =>\n    client(\"kanbans\", { data: param })\n  );\n};\n\nexport const useAddKanban = (queryKey: QueryKey) => {\n  const client = useHttp();\n\n  return useMutation(\n    (params: Partial<Kanban>) =>\n      client(`kanbans`, {\n        data: params,\n        method: \"POST\",\n      }),\n    useAddConfig(queryKey)\n  );\n};\n\nexport const useDeleteKanban = (queryKey: QueryKey) => {\n  const client = useHttp();\n\n  return useMutation(\n    ({ id }: { id: number }) =>\n      client(`kanbans/${id}`, {\n        method: \"DELETE\",\n      }),\n    useDeleteConfig(queryKey)\n  );\n};\n\nexport interface SortProps {\n  // 要重新排序的 item\n  fromId: number;\n  // 目标 item\n  referenceId: number;\n  // 放在目标item的前还是后\n  type: \"before\" | \"after\";\n  fromKanbanId?: number;\n  toKanbanId?: number;\n}\n\nexport const useReorderKanban = (queryKey: QueryKey) => {\n  const client = useHttp();\n  return useMutation((params: SortProps) => {\n    return client(\"kanbans/reorder\", {\n      data: params,\n      method: \"POST\",\n    });\n  }, useReorderKanbanConfig(queryKey));\n};\n","import React, { ReactNode } from \"react\";\nimport {\n  Draggable,\n  DraggableProps,\n  Droppable,\n  DroppableProps,\n  DroppableProvided,\n  DroppableProvidedProps,\n} from \"react-beautiful-dnd\";\n\ntype DropProps = Omit<DroppableProps, \"children\"> & { children: ReactNode };\n\nexport const Drop = ({ children, ...props }: DropProps) => {\n  return (\n    <Droppable {...props}>\n      {(provided) => {\n        if (React.isValidElement(children)) {\n          return React.cloneElement(children, {\n            ...provided.droppableProps,\n            ref: provided.innerRef,\n            provided,\n          });\n        }\n        return <div />;\n      }}\n    </Droppable>\n  );\n};\n\ntype DropChildProps = Partial<\n  { provided: DroppableProvided } & DroppableProvidedProps\n> &\n  React.HTMLAttributes<HTMLDivElement>;\nexport const DropChild = React.forwardRef<HTMLDivElement, DropChildProps>(\n  ({ children, ...props }, ref) => (\n    <div ref={ref} {...props}>\n      {children}\n      {props.provided?.placeholder}\n    </div>\n  )\n);\n\ntype DragProps = Omit<DraggableProps, \"children\"> & { children: ReactNode };\nexport const Drag = ({ children, ...props }: DragProps) => {\n  return (\n    <Draggable {...props}>\n      {(provided) => {\n        if (React.isValidElement(children)) {\n          return React.cloneElement(children, {\n            ...provided.draggableProps,\n            ...provided.dragHandleProps,\n            ref: provided.innerRef,\n          });\n        }\n        return <div />;\n      }}\n    </Draggable>\n  );\n};\n","import React from \"react\";\nimport { Kanban } from \"types/kanban\";\nimport { useTaskTypes } from \"utils/task-type\";\nimport taskIcon from \"assets/task.svg\";\nimport bugIcon from \"assets/bug.svg\";\nimport styled from \"@emotion/styled\";\nimport { Button, Card, Dropdown, Menu, Modal } from \"antd\";\nimport { useTasks } from \"utils/task\";\nimport {\n  useKanbansQueryKey,\n  useTasksModal,\n  useTasksSearchParams,\n} from \"screens/kanban/util\";\nimport { CreateTask } from \"screens/kanban/create-task\";\nimport { Task } from \"types/task\";\nimport { Mark } from \"components/mark\";\nimport { useDeleteKanban } from \"utils/kanban\";\nimport { Row } from \"components/lib\";\nimport { Drag, Drop, DropChild } from \"components/drag-and-drop\";\n\nconst TaskTypeIcon = ({ id }: { id: number }) => {\n  const { data: taskTypes } = useTaskTypes();\n  const name = taskTypes?.find((taskType) => taskType.id === id)?.name;\n  if (!name) {\n    return null;\n  }\n  return <img alt={\"task-icon\"} src={name === \"task\" ? taskIcon : bugIcon} />;\n};\n\nconst TaskCard = ({ task }: { task: Task }) => {\n  const { startEdit } = useTasksModal();\n  const { name: keyword } = useTasksSearchParams();\n  return (\n    <Card\n      onClick={() => startEdit(task.id)}\n      style={{ marginBottom: \"0.5rem\", cursor: \"pointer\" }}\n      key={task.id}\n    >\n      <p>\n        <Mark keyword={keyword} name={task.name} />\n      </p>\n      <TaskTypeIcon id={task.typeId} />\n    </Card>\n  );\n};\n\nexport const KanbanColumn = React.forwardRef<\n  HTMLDivElement,\n  { kanban: Kanban }\n>(({ kanban, ...props }, ref) => {\n  const { data: allTasks } = useTasks(useTasksSearchParams());\n  const tasks = allTasks?.filter((task) => task.kanbanId === kanban.id);\n  return (\n    <Container {...props} ref={ref}>\n      <Row between={true}>\n        <h3>{kanban.name}</h3>\n        <More kanban={kanban} key={kanban.id} />\n      </Row>\n      <TasksContainer>\n        <Drop\n          type={\"ROW\"}\n          direction={\"vertical\"}\n          droppableId={String(kanban.id)}\n        >\n          <DropChild style={{ minHeight: \"1rem\" }}>\n            {tasks?.map((task, taskIndex) => (\n              <Drag\n                key={task.id}\n                index={taskIndex}\n                draggableId={\"task\" + task.id}\n              >\n                <div>\n                  <TaskCard key={task.id} task={task} />\n                </div>\n              </Drag>\n            ))}\n          </DropChild>\n        </Drop>\n        <CreateTask kanbanId={kanban.id} />\n      </TasksContainer>\n    </Container>\n  );\n});\n\nconst More = ({ kanban }: { kanban: Kanban }) => {\n  const { mutateAsync } = useDeleteKanban(useKanbansQueryKey());\n  const startDelete = () => {\n    Modal.confirm({\n      okText: \"确定\",\n      cancelText: \"取消\",\n      title: \"确定删除看板吗\",\n      onOk() {\n        return mutateAsync({ id: kanban.id });\n      },\n    });\n  };\n  const overlay = (\n    <Menu>\n      <Menu.Item>\n        <Button type={\"link\"} onClick={startDelete}>\n          删除\n        </Button>\n      </Menu.Item>\n    </Menu>\n  );\n  return (\n    <Dropdown overlay={overlay}>\n      <Button type={\"link\"}>...</Button>\n    </Dropdown>\n  );\n};\n\nexport const Container = styled.div`\n  min-width: 27rem;\n  border-radius: 6px;\n  background-color: rgb(244, 245, 247);\n  display: flex;\n  flex-direction: column;\n  padding: 0.7rem 0.7rem 1rem;\n  margin-right: 1.5rem;\n`;\n\nconst TasksContainer = styled.div`\n  overflow: scroll;\n  flex: 1;\n\n  ::-webkit-scrollbar {\n    display: none;\n  }\n`;\n","import React from \"react\";\nimport { IdSelect } from \"components/id-select\";\nimport { useTaskTypes } from \"utils/task-type\";\n\nexport const TaskTypeSelect = (\n  props: React.ComponentProps<typeof IdSelect>\n) => {\n  const { data: taskTypes } = useTaskTypes();\n  return <IdSelect options={taskTypes || []} {...props} />;\n};\n","import React from \"react\";\nimport { useTasksSearchParams } from \"screens/kanban/util\";\nimport { useSetUrlSearchParam } from \"utils/url\";\nimport { Row } from \"components/lib\";\nimport { Button, Input } from \"antd\";\nimport { UserSelect } from \"components/user-select\";\nimport { TaskTypeSelect } from \"components/task-type-select\";\n\nexport const SearchPanel = () => {\n  const searchParams = useTasksSearchParams();\n  const setSearchParams = useSetUrlSearchParam();\n  const reset = () => {\n    setSearchParams({\n      typeId: undefined,\n      processorId: undefined,\n      tagId: undefined,\n      name: undefined,\n    });\n  };\n\n  return (\n    <Row marginBottom={4} gap={true}>\n      <Input\n        style={{ width: \"20rem\" }}\n        placeholder={\"任务名\"}\n        value={searchParams.name}\n        onChange={(evt) => setSearchParams({ name: evt.target.value })}\n      />\n      <UserSelect\n        defaultOptionName={\"经办人\"}\n        value={searchParams.processorId}\n        onChange={(value) => setSearchParams({ processorId: value })}\n      />\n      <TaskTypeSelect\n        defaultOptionName={\"类型\"}\n        value={searchParams.typeId}\n        onChange={(value) => setSearchParams({ typeId: value })}\n      />\n      <Button onClick={reset}>清除筛选器</Button>\n    </Row>\n  );\n};\n","import React, { useState } from \"react\";\nimport { useKanbansQueryKey, useProjectIdInUrl } from \"screens/kanban/util\";\nimport { useAddKanban } from \"utils/kanban\";\nimport { Input } from \"antd\";\nimport { Container } from \"screens/kanban/kanban-column\";\n\nexport const CreateKanban = () => {\n  const [name, setName] = useState(\"\");\n  const projectId = useProjectIdInUrl();\n  const { mutateAsync: addKanban } = useAddKanban(useKanbansQueryKey());\n\n  const submit = async () => {\n    await addKanban({ name, projectId });\n    setName(\"\");\n  };\n\n  return (\n    <Container>\n      <Input\n        size={\"large\"}\n        placeholder={\"新建看板名称\"}\n        onPressEnter={submit}\n        value={name}\n        onChange={(evt) => setName(evt.target.value)}\n      />\n    </Container>\n  );\n};\n","import { useHttp } from \"utils/http\";\nimport { QueryKey, useMutation, useQuery } from \"react-query\";\nimport { useAddConfig, useDeleteConfig } from \"utils/use-optimistic-options\";\nimport { Epic } from \"types/epic\";\n\nexport const useEpics = (param?: Partial<Epic>) => {\n  const client = useHttp();\n\n  return useQuery<Epic[]>([\"epics\", param], () =>\n    client(\"epics\", { data: param })\n  );\n};\n\nexport const useAddEpic = (queryKey: QueryKey) => {\n  const client = useHttp();\n\n  return useMutation(\n    (params: Partial<Epic>) =>\n      client(`epics`, {\n        data: params,\n        method: \"POST\",\n      }),\n    useAddConfig(queryKey)\n  );\n};\n\nexport const useDeleteEpic = (queryKey: QueryKey) => {\n  const client = useHttp();\n\n  return useMutation(\n    ({ id }: { id: number }) =>\n      client(`epics/${id}`, {\n        method: \"DELETE\",\n      }),\n    useDeleteConfig(queryKey)\n  );\n};\n","import React from \"react\";\nimport { IdSelect } from \"components/id-select\";\nimport { useEpics } from \"utils/epic\";\n\nexport const EpicSelect = (props: React.ComponentProps<typeof IdSelect>) => {\n  const { data: epics } = useEpics();\n  return <IdSelect options={epics || []} {...props} />;\n};\n","import React, { useEffect } from \"react\";\nimport { useTasksModal, useTasksQueryKey } from \"screens/kanban/util\";\nimport { useDeleteTask, useEditTask } from \"utils/task\";\nimport { Button, Form, Input, Modal } from \"antd\";\nimport { UserSelect } from \"components/user-select\";\nimport { TaskTypeSelect } from \"components/task-type-select\";\nimport { EpicSelect } from \"components/epic-select\";\n\nconst layout = {\n  labelCol: { span: 8 },\n  wrapperCol: { span: 16 },\n};\n\nexport const TaskModal = () => {\n  const [form] = Form.useForm();\n  const { editingTaskId, editingTask, close } = useTasksModal();\n  const { mutateAsync: editTask, isLoading: editLoading } = useEditTask(\n    useTasksQueryKey()\n  );\n  const { mutate: deleteTask } = useDeleteTask(useTasksQueryKey());\n\n  const onCancel = () => {\n    close();\n    form.resetFields();\n  };\n\n  const onOk = async () => {\n    await editTask({ ...editingTask, ...form.getFieldsValue() });\n    close();\n  };\n\n  const startDelete = () => {\n    close();\n    Modal.confirm({\n      okText: \"确定\",\n      cancelText: \"取消\",\n      title: \"确定删除任务吗\",\n      onOk() {\n        return deleteTask({ id: Number(editingTaskId) });\n      },\n    });\n  };\n\n  useEffect(() => {\n    form.setFieldsValue(editingTask);\n  }, [form, editingTask]);\n\n  return (\n    <Modal\n      forceRender={true}\n      onCancel={onCancel}\n      onOk={onOk}\n      okText={\"确认\"}\n      cancelText={\"取消\"}\n      confirmLoading={editLoading}\n      title={\"编辑任务\"}\n      visible={!!editingTaskId}\n    >\n      <Form {...layout} initialValues={editingTask} form={form}>\n        <Form.Item\n          label={\"任务名\"}\n          name={\"name\"}\n          rules={[{ required: true, message: \"请输入任务名\" }]}\n        >\n          <Input />\n        </Form.Item>\n        <Form.Item label={\"任务组\"} name={\"epicId\"}>\n          <EpicSelect defaultOptionName={\"任务组\"} />\n        </Form.Item>\n        <Form.Item label={\"经办人\"} name={\"processorId\"}>\n          <UserSelect defaultOptionName={\"经办人\"} />\n        </Form.Item>\n        <Form.Item label={\"类型\"} name={\"typeId\"}>\n          <TaskTypeSelect />\n        </Form.Item>\n      </Form>\n      <div style={{ textAlign: \"right\" }}>\n        <Button\n          onClick={startDelete}\n          style={{ fontSize: \"14px\" }}\n          size={\"small\"}\n        >\n          删除\n        </Button>\n      </div>\n    </Modal>\n  );\n};\n","import React, { useCallback } from \"react\";\nimport { useDocumentTitle } from \"utils\";\nimport {\n  useKanbanSearchParams,\n  useKanbansQueryKey,\n  useProjectInUrl,\n  useTasksQueryKey,\n  useTasksSearchParams,\n} from \"screens/kanban/util\";\nimport { KanbanColumn } from \"screens/kanban/kanban-column\";\nimport styled from \"@emotion/styled\";\nimport { useKanbans, useReorderKanban } from \"utils/kanban\";\nimport { SearchPanel } from \"screens/kanban/search-panel\";\nimport { ScreenContainer } from \"components/lib\";\nimport { useReorderTask, useTasks } from \"utils/task\";\nimport { Spin } from \"antd\";\nimport { CreateKanban } from \"screens/kanban/create-kanban\";\nimport { TaskModal } from \"screens/kanban/task-modal\";\nimport { DragDropContext, DropResult } from \"react-beautiful-dnd\";\nimport { Drag, Drop, DropChild } from \"components/drag-and-drop\";\nimport { Profiler } from \"components/profiler\";\n\nexport const KanbanScreen = () => {\n  useDocumentTitle(\"看板列表\");\n\n  const { data: currentProject } = useProjectInUrl();\n  const { data: kanbans, isLoading: kanbanIsLoading } = useKanbans(\n    useKanbanSearchParams()\n  );\n  const { isLoading: taskIsLoading } = useTasks(useTasksSearchParams());\n  const isLoading = taskIsLoading || kanbanIsLoading;\n\n  const onDragEnd = useDragEnd();\n  return (\n    <Profiler id={\"看板页面\"}>\n      <DragDropContext onDragEnd={onDragEnd}>\n        <ScreenContainer>\n          <h1>{currentProject?.name}看板</h1>\n          <SearchPanel />\n          {isLoading ? (\n            <Spin size={\"large\"} />\n          ) : (\n            <ColumnsContainer>\n              <Drop\n                type={\"COLUMN\"}\n                direction={\"horizontal\"}\n                droppableId={\"kanban\"}\n              >\n                <DropChild style={{ display: \"flex\" }}>\n                  {kanbans?.map((kanban, index) => (\n                    <Drag\n                      key={kanban.id}\n                      draggableId={\"kanban\" + kanban.id}\n                      index={index}\n                    >\n                      <KanbanColumn kanban={kanban} key={kanban.id} />\n                    </Drag>\n                  ))}\n                </DropChild>\n              </Drop>\n              <CreateKanban />\n            </ColumnsContainer>\n          )}\n          <TaskModal />\n        </ScreenContainer>\n      </DragDropContext>\n    </Profiler>\n  );\n};\n\nexport const useDragEnd = () => {\n  const { data: kanbans } = useKanbans(useKanbanSearchParams());\n  const { mutate: reorderKanban } = useReorderKanban(useKanbansQueryKey());\n  const { mutate: reorderTask } = useReorderTask(useTasksQueryKey());\n  const { data: allTasks = [] } = useTasks(useTasksSearchParams());\n  return useCallback(\n    ({ source, destination, type }: DropResult) => {\n      if (!destination) {\n        return;\n      }\n      // 看板排序\n      if (type === \"COLUMN\") {\n        const fromId = kanbans?.[source.index].id;\n        const toId = kanbans?.[destination.index].id;\n        if (!fromId || !toId || fromId === toId) {\n          return;\n        }\n        const type = destination.index > source.index ? \"after\" : \"before\";\n        reorderKanban({ fromId, referenceId: toId, type });\n      }\n      if (type === \"ROW\") {\n        const fromKanbanId = +source.droppableId;\n        const toKanbanId = +destination.droppableId;\n        const fromTask = allTasks.filter(\n          (task) => task.kanbanId === fromKanbanId\n        )[source.index];\n        const toTask = allTasks.filter((task) => task.kanbanId === toKanbanId)[\n          destination.index\n        ];\n        if (fromTask?.id === toTask?.id) {\n          return;\n        }\n        reorderTask({\n          fromId: fromTask?.id,\n          referenceId: toTask?.id,\n          fromKanbanId,\n          toKanbanId,\n          type:\n            fromKanbanId === toKanbanId && destination.index > source.index\n              ? \"after\"\n              : \"before\",\n        });\n      }\n    },\n    [kanbans, reorderKanban, allTasks, reorderTask]\n  );\n};\n\nexport const ColumnsContainer = styled(\"div\")`\n  display: flex;\n  overflow-x: scroll;\n  flex: 1;\n`;\n","import { useProjectIdInUrl } from \"screens/kanban/util\";\n\nexport const useEpicSearchParams = () => ({ projectId: useProjectIdInUrl() });\n\nexport const useEpicsQueryKey = () => [\"epics\", useEpicSearchParams()];\n","import React, { useEffect } from \"react\";\nimport { Button, Drawer, Form, Input, Spin } from \"antd\";\nimport { DrawerProps } from \"antd/es/drawer\";\nimport styled from \"@emotion/styled\";\nimport { ErrorBox } from \"components/lib\";\nimport { useAddEpic } from \"utils/epic\";\nimport { useEpicsQueryKey } from \"screens/epic/util\";\nimport { useProjectIdInUrl } from \"screens/kanban/util\";\n\nexport const CreateEpic = (\n  props: Pick<DrawerProps, \"visible\"> & { onClose: () => void }\n) => {\n  const { mutate: addEpic, isLoading, error } = useAddEpic(useEpicsQueryKey());\n  const [form] = Form.useForm();\n  const projectId = useProjectIdInUrl();\n\n  const onFinish = async (values: any) => {\n    await addEpic({ ...values, projectId });\n    props.onClose();\n  };\n\n  useEffect(() => {\n    form.resetFields();\n  }, [form, props.visible]);\n\n  return (\n    <Drawer\n      visible={props.visible}\n      onClose={props.onClose}\n      forceRender={true}\n      destroyOnClose={true}\n      width={\"100%\"}\n    >\n      <Container>\n        {isLoading ? (\n          <Spin size={\"large\"} />\n        ) : (\n          <>\n            <h1>创建任务组</h1>\n            <ErrorBox error={error} />\n            <Form\n              form={form}\n              layout={\"vertical\"}\n              style={{ width: \"40rem\" }}\n              onFinish={onFinish}\n            >\n              <Form.Item\n                label={\"名称\"}\n                name={\"name\"}\n                rules={[{ required: true, message: \"请输入任务组名\" }]}\n              >\n                <Input placeholder={\"请输入任务组名称\"} />\n              </Form.Item>\n\n              <Form.Item style={{ textAlign: \"right\" }}>\n                <Button\n                  loading={isLoading}\n                  type={\"primary\"}\n                  htmlType={\"submit\"}\n                >\n                  提交\n                </Button>\n              </Form.Item>\n            </Form>\n          </>\n        )}\n      </Container>\n    </Drawer>\n  );\n};\n\nconst Container = styled.div`\n  height: 80vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`;\n","import React, { useState } from \"react\";\nimport { Row, ScreenContainer } from \"components/lib\";\nimport { useProjectInUrl } from \"screens/kanban/util\";\nimport { useDeleteEpic, useEpics } from \"utils/epic\";\nimport { Button, List, Modal } from \"antd\";\nimport dayjs from \"dayjs\";\nimport { useTasks } from \"utils/task\";\nimport { Link } from \"react-router-dom\";\nimport { useEpicSearchParams, useEpicsQueryKey } from \"screens/epic/util\";\nimport { Epic } from \"types/epic\";\nimport { CreateEpic } from \"screens/epic/create-epic\";\n\nexport const EpicScreen = () => {\n  const { data: currentProject } = useProjectInUrl();\n  const { data: epics } = useEpics(useEpicSearchParams());\n  const { data: tasks } = useTasks({ projectId: currentProject?.id });\n  const { mutate: deleteEpic } = useDeleteEpic(useEpicsQueryKey());\n  const [epicCreateOpen, setEpicCreateOpen] = useState(false);\n\n  const confirmDeleteEpic = (epic: Epic) => {\n    Modal.confirm({\n      title: `确定删除项目组：${epic.name}`,\n      content: \"点击确定删除\",\n      okText: \"确定\",\n      onOk() {\n        deleteEpic({ id: epic.id });\n      },\n    });\n  };\n\n  return (\n    <ScreenContainer>\n      <Row between={true}>\n        <h1>{currentProject?.name}任务组</h1>\n        <Button onClick={() => setEpicCreateOpen(true)} type={\"link\"}>\n          创建任务组\n        </Button>\n      </Row>\n      <List\n        style={{ overflow: \"scroll\" }}\n        dataSource={epics}\n        itemLayout={\"vertical\"}\n        renderItem={(epic) => (\n          <List.Item>\n            <List.Item.Meta\n              title={\n                <Row between={true}>\n                  <span>{epic.name}</span>\n                  <Button onClick={() => confirmDeleteEpic(epic)} type={\"link\"}>\n                    删除\n                  </Button>\n                </Row>\n              }\n              description={\n                <div>\n                  <div>开始时间：{dayjs(epic.start).format(\"YYYY-MM-DD\")}</div>\n                  <div>结束时间：{dayjs(epic.end).format(\"YYYY-MM-DD\")}</div>\n                </div>\n              }\n            />\n            <div>\n              {tasks\n                ?.filter((task) => task.epicId === epic.id)\n                .map((task) => (\n                  <Link\n                    to={`/projects/${currentProject?.id}/kanban?editingTaskId=${task.id}`}\n                    key={task.id}\n                  >\n                    {task.name}\n                  </Link>\n                ))}\n            </div>\n          </List.Item>\n        )}\n      />\n      <CreateEpic\n        onClose={() => setEpicCreateOpen(false)}\n        visible={epicCreateOpen}\n      />\n    </ScreenContainer>\n  );\n};\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Route, Routes, useLocation } from \"react-router\";\nimport { KanbanScreen } from \"screens/kanban\";\nimport { EpicScreen } from \"screens/epic\";\nimport styled from \"@emotion/styled\";\nimport { Menu } from \"antd\";\n\nconst useRouteType = () => {\n  const units = useLocation().pathname.split(\"/\");\n  return units[units.length - 1];\n};\n\nexport const ProjectScreen = () => {\n  const routeType = useRouteType();\n  return (\n    <Container>\n      <Aside>\n        <Menu mode={\"inline\"} selectedKeys={[routeType]}>\n          <Menu.Item key={\"kanban\"}>\n            <Link to={\"kanban\"}>看板</Link>\n          </Menu.Item>\n          <Menu.Item key={\"epic\"}>\n            <Link to={\"epic\"}>任务组</Link>\n          </Menu.Item>\n        </Menu>\n      </Aside>\n      <Main>\n        <Routes>\n          {/*projects/:projectId/kanban*/}\n          <Route path={\"kanban\"} element={<KanbanScreen />} />\n          {/*projects/:projectId/epic*/}\n          <Route path={\"epic\"} element={<EpicScreen />} />\n          <Route index element={<KanbanScreen />} />\n        </Routes>\n      </Main>\n    </Container>\n  );\n};\n\nconst Aside = styled.aside`\n  background-color: rgb(244, 245, 247);\n  display: flex;\n`;\n\nconst Main = styled.div`\n  box-shadow: -5px 0 5px -5px rgba(0, 0, 0, 0.1);\n  display: flex;\n  overflow: hidden;\n`;\n\nconst Container = styled.div`\n  display: grid;\n  grid-template-columns: 16rem 1fr;\n  width: 100%;\n`;\n","import React, { useEffect } from \"react\";\nimport { Button, Drawer, Form, Input, Spin } from \"antd\";\nimport {\n  useProjectModal,\n  useProjectsQueryKey,\n} from \"screens/project-list/util\";\nimport { UserSelect } from \"components/user-select\";\nimport { useAddProject, useEditProject } from \"utils/project\";\nimport { ErrorBox } from \"components/lib\";\nimport styled from \"@emotion/styled\";\n\nexport const ProjectModal = () => {\n  const { projectModalOpen, close, editingProject, isLoading } =\n    useProjectModal();\n  const useMutateProject = editingProject ? useEditProject : useAddProject;\n\n  const {\n    mutateAsync,\n    error,\n    isLoading: mutateLoading,\n  } = useMutateProject(useProjectsQueryKey());\n  const [form] = Form.useForm();\n  const onFinish = (values: any) => {\n    mutateAsync({ ...editingProject, ...values }).then(() => {\n      form.resetFields();\n      close();\n    });\n  };\n  const closeModal = () => {\n    form.resetFields();\n    close();\n  };\n\n  const title = editingProject ? \"编辑项目\" : \"创建项目\";\n\n  useEffect(() => {\n    form.setFieldsValue(editingProject);\n  }, [editingProject, form]);\n\n  return (\n    <Drawer\n      forceRender={true}\n      onClose={closeModal}\n      visible={projectModalOpen}\n      width={\"100%\"}\n    >\n      <Container>\n        {isLoading ? (\n          <Spin size={\"large\"} />\n        ) : (\n          <>\n            <h1>{title}</h1>\n            <ErrorBox error={error} />\n            <Form\n              form={form}\n              layout={\"vertical\"}\n              style={{ width: \"40rem\" }}\n              onFinish={onFinish}\n            >\n              <Form.Item\n                label={\"名称\"}\n                name={\"name\"}\n                rules={[{ required: true, message: \"请输入项目名\" }]}\n              >\n                <Input placeholder={\"请输入项目名称\"} />\n              </Form.Item>\n\n              <Form.Item\n                label={\"部门\"}\n                name={\"organization\"}\n                rules={[{ required: true, message: \"请输入部门名\" }]}\n              >\n                <Input placeholder={\"请输入部门名\"} />\n              </Form.Item>\n\n              <Form.Item label={\"负责人\"} name={\"personId\"}>\n                <UserSelect defaultOptionName={\"负责人\"} />\n              </Form.Item>\n\n              <Form.Item style={{ textAlign: \"right\" }}>\n                <Button\n                  loading={mutateLoading}\n                  type={\"primary\"}\n                  htmlType={\"submit\"}\n                >\n                  提交\n                </Button>\n              </Form.Item>\n            </Form>\n          </>\n        )}\n      </Container>\n    </Drawer>\n  );\n};\n\nconst Container = styled.div`\n  height: 80vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`;\n","import React from \"react\";\nimport { ProjectListScreen } from \"screens/project-list\";\nimport { useAuth } from \"context/auth-context\";\nimport styled from \"@emotion/styled\";\nimport { ButtonNoPadding, Row } from \"components/lib\";\nimport { Button, Dropdown, Menu } from \"antd\";\nimport { Route, Routes } from \"react-router\";\nimport { ProjectScreen } from \"screens/project\";\nimport { resetRoute } from \"utils\";\nimport { ProjectModal } from \"screens/project-list/project-modal\";\n\n/**\n * grid 和 flex 各自的应用场景\n * 1. 要考虑，是一维布局 还是 二维布局\n * 一般来说，一维布局用flex，二维布局用grid\n * 2. 是从内容出发还是从布局出发？\n * 从内容出发：你先有一组内容(数量一般不固定),然后希望他们均匀的分布在容器中，由内容自己的大小决定占据的空间\n * 从布局出发：先规划网格(数量一般比较固定)，然后再把元素往里填充\n * 从内容出发，用flex\n * 从布局出发，用grid\n *\n */\n\n// prop drilling\n\nexport default function AuthenticatedApp() {\n  return (\n    <Container>\n      <PageHeader />\n      <Main>\n        <Routes>\n          <Route path={\"projects\"} element={<ProjectListScreen />} />\n          <Route path={\"projects/:projectId/*\"} element={<ProjectScreen />} />\n          <Route index element={<ProjectListScreen />} />\n        </Routes>\n      </Main>\n      <ProjectModal />\n    </Container>\n  );\n}\n\nconst PageHeader = () => {\n  return (\n    <Header between={true}>\n      <HeaderLeft gap={true}>\n        <ButtonNoPadding type={\"link\"} onClick={resetRoute}>\n          首页\n        </ButtonNoPadding>\n      </HeaderLeft>\n      <HeaderRight>\n        <User />\n      </HeaderRight>\n    </Header>\n  );\n};\n\nconst User = () => {\n  const { logout, user } = useAuth();\n  return (\n    <Dropdown\n      overlay={\n        <Menu>\n          <Menu.Item key={\"logout\"}>\n            <Button onClick={logout} type={\"link\"}>\n              登出\n            </Button>\n          </Menu.Item>\n        </Menu>\n      }\n    >\n      <Button type={\"link\"} onClick={(e) => e.preventDefault()}>\n        Hi, {user?.name}\n      </Button>\n    </Dropdown>\n  );\n};\n\n// temporal dead zone(暂时性死区)\nconst Container = styled.div`\n  display: grid;\n  grid-template-rows: 6rem 1fr;\n  height: 100vh;\n`;\n\n// grid-area 用来给grid子元素起名字\nconst Header = styled(Row)`\n  padding: 3.2rem;\n  box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.1);\n  z-index: 1;\n`;\nconst HeaderLeft = styled(Row)``;\nconst HeaderRight = styled.div``;\nconst Main = styled.main`\n  display: flex;\n  overflow: hidden;\n`;\n"],"names":["useUsers","param","client","useHttp","useQuery","data","IdSelect","props","value","onChange","defaultOptionName","options","restProps","length","toNumber","undefined","map","option","key","id","name","isNaN","Number","UserSelect","users","SearchPanel","setParam","style","marginBottom","layout","placeholder","type","evt","target","personId","Pin","checked","onCheckedChange","count","num","reorder","fromId","referenceId","list","copiedList","movingItemIndex","findIndex","item","insertAfter","targetIndex","insertBefore","from","to","toItem","removedItem","splice","toIndex","indexOf","useConfig","queryKey","callback","queryClient","useQueryClient","onSuccess","invalidateQueries","onMutate","previousItems","getQueryData","setQueryData","old","onError","error","newItem","context","useDeleteConfig","filter","useEditConfig","useAddConfig","useEditProject","useMutation","params","method","useAddProject","useProject","enabled","Boolean","useUrlQueryParam","keys","useSearchParams","searchParams","setSearchParams","useSetUrlSearchParam","useState","stateKeys","useMemo","subset","Object","fromEntries","setSearchParam","o","cleanObject","useProjectsSearchParams","useProjectsQueryKey","useProjectModal","projectCreate","setProjectCreate","editingProjectId","setEditingProjectId","setUrlParams","editingProject","isLoading","projectModalOpen","open","close","startEdit","List","mutate","rowKey","pagination","columns","title","disabled","render","project","pin","sorter","a","b","localeCompare","String","dataIndex","find","user","created","dayjs","format","More","useDeleteProject","deleteProject","overlay","onClick","Modal","content","okText","onOk","confirmDeleteProject","ProjectListScreen","useDocumentTitle","useProjects","useDebounce","between","loading","dataSource","whyDidYouRender","useTasks","debouncedParam","useReorderTask","kanbanId","toKanbanId","useReorderTaskConfig","useProjectIdInUrl","useLocation","pathname","match","useProjectInUrl","useKanbanSearchParams","projectId","useKanbansQueryKey","useTasksSearchParams","typeId","processorId","tagId","useTasksQueryKey","useTasksModal","editingTaskId","setEditingTaskId","useTask","editingTask","useCallback","useTaskTypes","CreateTask","setName","addTask","useAddTask","mutateAsync","inputMode","setInputMode","submit","toggle","mode","useEffect","onBlur","autoFocus","onPressEnter","Mark","keyword","arr","split","str","index","color","useKanbans","useReorderKanban","useReorderKanbanConfig","Drop","children","provided","React","droppableProps","ref","innerRef","DropChild","Drag","draggableProps","dragHandleProps","TaskTypeIcon","taskTypes","taskType","alt","src","taskIcon","bugIcon","TaskCard","task","cursor","KanbanColumn","kanban","allTasks","tasks","Container","TasksContainer","direction","droppableId","minHeight","taskIndex","draggableId","useDeleteKanban","cancelText","styled","TaskTypeSelect","gap","width","CreateKanban","addKanban","useAddKanban","size","useEpics","EpicSelect","epics","labelCol","span","wrapperCol","TaskModal","Form","form","useEditTask","editTask","editLoading","deleteTask","useDeleteTask","getFieldsValue","setFieldsValue","forceRender","onCancel","resetFields","confirmLoading","visible","initialValues","label","rules","required","message","textAlign","fontSize","KanbanScreen","currentProject","kanbans","kanbanIsLoading","onDragEnd","useDragEnd","ColumnsContainer","display","reorderKanban","reorderTask","source","destination","toId","fromKanbanId","fromTask","toTask","useEpicSearchParams","useEpicsQueryKey","CreateEpic","useAddEpic","addEpic","onFinish","values","onClose","destroyOnClose","htmlType","EpicScreen","deleteEpic","useDeleteEpic","epicCreateOpen","setEpicCreateOpen","overflow","itemLayout","renderItem","epic","confirmDeleteEpic","description","start","end","epicId","ProjectScreen","routeType","units","useRouteType","Aside","selectedKeys","Main","path","element","ProjectModal","mutateLoading","then","AuthenticatedApp","PageHeader","Header","HeaderLeft","resetRoute","HeaderRight","User","useAuth","logout","e","preventDefault","Row"],"sourceRoot":""}